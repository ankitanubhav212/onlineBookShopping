(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{38:function(t,e,c){},39:function(t,e,c){},65:function(t,e,c){"use strict";c.r(e);var a=c(1),n=c(0),i=c.n(n),s=c(30),o=c.n(s),r=(c(38),c(39),c(13)),l=c(2),d=c(12),j=c(5),h=c.p+"static/media/shopping-cart.25d65fd4.svg",u=c(31),b=c.n(u),p=function(t){var e=t.item,c=t.addCartFun;return Object(a.jsxs)("div",{className:"item-card",children:[Object(a.jsx)("img",{height:"100px",width:"100px",src:e.image,alt:e.title}),Object(a.jsxs)("div",{className:"item-card-title",children:[e.title,Object(a.jsxs)("div",{className:"author",children:["by ",e.authors]})]}),Object(a.jsxs)("div",{className:"flex",children:[Object(a.jsx)(b.a,{count:5,size:24,value:e.averageRating,edit:!1,activeColor:"#ffd700"}),Object(a.jsx)("div",{style:{marginTop:"5px"},children:e.ratingsCount})]}),Object(a.jsxs)("div",{className:"item-card-price",children:[Object(a.jsx)("span",{children:"\u20b9"}),e.price]}),Object(a.jsxs)("button",{onClick:function(){return c(e)},className:"item-card-btn",children:[Object(a.jsx)("img",{height:"18px",width:"18px",src:h,alt:e}),"Add to cart"]})]})},m=c(4),O=c.n(m),x=function(t){var e=Object(l.f)(),c=Object(n.useState)([]),i=Object(j.a)(c,2),s=i[0],o=i[1],r=Object(n.useState)([]),h=Object(j.a)(r,2),u=h[0],b=h[1],m=Object(n.useState)([]),x=Object(j.a)(m,2),g=x[0],f=x[1],v=Object(n.useState)({}),N=Object(j.a)(v,2),k=N[0],S=N[1],C=Object(n.useState)(1),I=Object(j.a)(C,2),y=I[0],F=I[1],w=Object(n.useState)(0),P=Object(j.a)(w,2),T=P[0],E=P[1],D=Object(n.useState)("averageRating"),B=Object(j.a)(D,2),R=B[0],q=(B[1],function(t){f([].concat(Object(d.a)(g),[t])),O.a.post("http://localhost:8080/api/additem",t).then((function(t){S(t.data)}))}),z=function(){O.a.get("http://localhost:8080/api/items?pageNo="+y+"&sort="+R+"&search=").then((function(t){o([].concat(Object(d.a)(s),Object(d.a)(t.data.content))),F(y+1),E(t.data.totalElements)}))};Object(n.useEffect)((function(){z(),O.a.get("http://localhost:8080/api/order").then((function(t){S(t.data)})),O.a.get("https://s3-ap-southeast-1.amazonaws.com/he-public-data/bookimage816b123.json").then((function(t){b(t.data)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",placeholder:"Search books..",onChange:function(t){O.a.get("http://localhost:8080/api/items?pageNo=1&sort="+R+"&search="+t.target.value).then((function(t){o(Object(d.a)(t.data.content)),F(1),E(t.data.totalElements)}))}}),Object(a.jsx)("label",{children:"Sort By"}),Object(a.jsxs)("select",{onChange:function(t){O.a.get("http://localhost:8080/api/items?pageNo=1&sort="+t.target.value+"&search=").then((function(t){o(Object(d.a)(t.data.content)),F(1),E(t.data.totalElements)}))},name:"cars",id:"cars",children:[Object(a.jsx)("option",{value:"averageRating",children:"Rating"}),Object(a.jsx)("option",{value:"price",children:"Price"})]}),Object(a.jsxs)("div",{className:"container",onScroll:function(t){return function(t){t.target.scrollHeight-t.target.scrollTop===t.target.clientHeight&&s.length<T&&z()}(t)},children:[s.map((function(t,e){return t.image=u[t.bookID%10]?u[t.bookID%10].Image:"",Object(a.jsx)(p,{item:t,addCartFun:q},e)})),Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsxs)("span",{children:["Total Item: ",k.cartItems?k.cartItems.length:0]}),Object(a.jsx)("button",{type:"button",className:"checkout-btn",onClick:function(){k.cartItems&&k.cartItems.length>0?e.push("/checkout"):alert("Please add item in the cart to checkout")},children:"Checkout"})]})]})]})},g=c(20),f=function(t){var e=t.item,c=t.deleteFun,i=t.updateOrderFun,s=Object(n.useState)(e.quantity),o=Object(j.a)(s,2),r=o[0],l=o[1],d=Object(n.useState)(e.product.price*e.quantity),h=Object(j.a)(d,2),u=h[0],b=h[1],p=function(t){"add-item"===t.target.id?O.a.post("http://localhost:8080/api/additem",e.product).then((function(t){l(r+1),b(e.product.price*(r+1)),i(t.data)})):r>1&&O.a.put("http://localhost:8080/api/remove/"+e.id).then((function(t){l(r-1),b(e.product.price*(r-1)),i(t.data)}))};return Object(a.jsxs)("div",{className:"checkout-item-card",children:[Object(a.jsxs)("div",{className:"flex",children:[Object(a.jsx)("img",{height:"60px",width:"60px",src:e.image,alt:e.name}),Object(a.jsxs)("div",{className:"ml-20",children:[Object(a.jsx)("div",{children:e.product.title}),Object(a.jsxs)("div",{children:["Quantity:",Object(a.jsx)("button",{id:"add-item",className:"add-remove",onClick:p,children:"+"}),r,Object(a.jsx)("button",{id:"remove-item",onClick:p,className:"add-remove",children:"-"}),Object(a.jsx)("span",{className:"icon-separator"})," ",Object(a.jsx)("span",{onClick:function(){return c(e.id)},className:"delete-btn",children:"Delete"})]})]})]}),Object(a.jsx)("div",{children:u})]})},v=function(){var t=Object(n.useState)({}),e=Object(j.a)(t,2),c=e[0],i=e[1],s=Object(n.useState)([]),o=Object(j.a)(s,2),l=o[0],d=o[1],h=function(t){O.a.delete("http://localhost:8080/api/delete/"+c.id+"/"+t).then((function(t){i(Object(g.a)({},t.data))}))},u=function(t){i(Object(g.a)({},t))};Object(n.useEffect)((function(){O.a.get("http://localhost:8080/api/order").then((function(t){i(t.data)})),O.a.get("https://s3-ap-southeast-1.amazonaws.com/he-public-data/bookimage816b123.json").then((function(t){d(t.data)}))}),[]);return Object(a.jsx)("div",{className:"checkout",children:c&&c.cartItems&&c.cartItems.length>0?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"checkout-table",children:[c.cartItems.map((function(t,e){return t.image=l.length?l[e%9].Image:"",Object(a.jsx)(f,{item:t,updateOrderFun:u,deleteFun:h},t.product.bookID)})),Object(a.jsxs)("div",{className:"sub-total",children:["SubTotal:",c.totalPrice," "]})]}),Object(a.jsx)("div",{className:"proceed-buy",children:Object(a.jsx)("button",{className:"proceed-btn",onClick:function(){O.a.get("http://localhost:8080/api/payment/"+c.id+"?price="+c.totalPrice).then((function(t){window.location.href=t.data.payment_request.longurl}))},children:"Proceed To Payment"})})]}):Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)(r.b,{to:"/list",children:"Start Shopping"})})})};var N=function(){return Object(a.jsx)(r.a,{children:Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)("header",{className:"app-header",children:"Online Book Shopping"}),Object(a.jsx)(l.b,{exact:!0,path:"",render:function(){return Object(a.jsx)(l.a,{to:"/list"})}}),Object(a.jsx)(l.b,{exact:!0,path:"/list",component:x}),Object(a.jsx)(l.b,{exact:!0,path:"/checkout",component:v})]})})},k=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,66)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,s=e.getTTFB;c(t),a(t),n(t),i(t),s(t)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),k()}},[[65,1,2]]]);
//# sourceMappingURL=main.7769970f.chunk.js.map